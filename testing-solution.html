<!DOCTYPE html>
<html>
<head>
	<meta charset=utf-8 />
	<title>Testing Solution</title>
	<style type="text/css">
	body {color: black; background: white;}
	.grey {
	  color: #888;
	}
</style>
</head>
<body>
	
	<h1>Testing Solution</h1>
	Running <a href="http://stackoverflow.com/questions/5007574/rendering-plaintext-as-html-maintaining-whitespace-without-pre/5007620#5007620">this suggestion</a> on this text:
	<pre><code>First line\n    Second line, indented    four spaces\n   Three   spaces
<span class=grey>123456789&bull;123456789&bull;123456789&bull;123456789&bull;123456789&bull;123456789&bull;123456789&bull;</span></code></pre>
<h3>Result</h3>
<p>Note a space was lost at the beginning of the last line.</p>
	<div><code>
	<script type="text/javascript">
	var text = 'First line\n    Second line, indented    four spaces\n   Three   spaces';
	
	text = text.replace(/\t/g, '    ')
           .replace(/  /g, ' &nbsp;')
           .replace(/\r\n|\n|\r/g, '<br />');
  document.write(text);
	</script><br /><span class=grey>123456789&bull;123456789&bull;123456789</span>
	</div></code>
	
</body>
</html>